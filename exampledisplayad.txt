
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV Scoreboard Ad Bug</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Set a custom font and dark background */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; 
            min-height: 100vh;
        }

        /* --- Animation Logic for Sliding Out --- */

        /* 1. Ensure Scoreboard is always on top (Z-index 10) */
        #scoreboard {
            z-index: 10;
            /* Add transition property for smooth margin-left change */
            transition: margin-left 1s ease-in-out; 
            /* Ensure background is opaque to cover the ad box */
            background-color: rgba(0, 0, 0, 0.9);
        }

        /* 2. The main fixed container uses this class for the HIDDEN state */
        .ad-hidden-state {
            /* Ad container width is w-48, which is 12rem */
            --ad-width: 12rem;
        }

        /* 3. Pull the scoreboard left by the width of the ad-container when HIDDEN */
        .ad-hidden-state #scoreboard {
            margin-left: calc(var(--ad-width) * -1); 
            /* Hide the left border of the scoreboard when it's covering the ad */
            border-left-width: 0px; 
        }

        /* 4. Ensure the right-side border of the AD-CONTAINER is visible when HIDDEN */
        .ad-hidden-state #ad-container {
            border-right-width: 2px; /* Set border back when hidden */
        }
    </style>
</head>
<body class="p-8">

    <!-- 
        ================================================================
        CONTROL PANEL (For triggering the animation)
        ================================================================
    -->
    <div class="absolute top-8 left-1/2 -translate-x-1/2 p-6 bg-gray-800 rounded-xl shadow-2xl z-50">
        <h1 class="text-2xl font-bold text-white mb-4">Broadcast Control</h1>
        <button 
            id="ad-trigger-btn" 
            class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition duration-150 ease-in-out disabled:opacity-50"
            onclick="triggerAd()"
        >
            Show 10-Second Ad
        </button>
        <p id="timer-display" class="mt-4 text-center text-xl font-semibold text-gray-300">Ready</p>
    </div>


    <!-- 
        ================================================================
        THE TV SCOREBOARD BUG (Fixed at bottom right)
        Uses 'ad-hidden-state' class for initial positioning
        ================================================================
    -->
    <div id="bug-wrapper" class="fixed bottom-4 right-4 flex items-center shadow-2xl ad-hidden-state">

        <!-- 
            1. ADVERTISEMENT DISPLAY BOX (Slides) - Positioned left in flex order
        -->
        <div 
            id="ad-container" 
            class="h-16 w-48 py-2 px-4 bg-gray-900 bg-opacity-90 flex-shrink-0 rounded-l-xl border-2 border-gray-700 flex items-center justify-center text-center text-sm font-semibold text-yellow-300 transition duration-1000 ease-in-out"
        >
            <div class="flex flex-col">
                <span class="text-xs text-white/70">SPONSORED BY:</span>
                <span class="text-lg tracking-wider">Acme Corp.</span>
            </div>
        </div>

        <!-- 
            2. SCOREBOARD DISPLAY (Static Anchor) - Positioned right in flex order
            The negative margin on this element creates the "hidden behind" effect.
        -->
        <div id="scoreboard" class="h-16 bg-black flex items-center justify-center space-x-4 p-4 rounded-r-xl border-2 border-gray-700">
            
            <!-- Team 1 Score -->
            <div class="flex items-center space-x-2">
                <span class="text-2xl font-extrabold text-blue-400">DEV</span>
                <span class="text-3xl font-extrabold text-white">78</span>
            </div>

            <!-- Separator/Time -->
            <div class="text-sm font-semibold text-gray-400 border-x border-gray-700 px-3 h-full flex flex-col justify-center">
                <span class="text-xs">QTR 4</span>
                <span class="text-lg leading-none">5:32</span>
            </div>
            
            <!-- Team 2 Score -->
            <div class="flex items-center space-x-2">
                <span class="text-2xl font-extrabold text-red-400">GEM</span>
                <span class="text-3xl font-extrabold text-white">81</span>
            </div>
        </div>

    </div>

    <script>
        const bugWrapper = document.getElementById('bug-wrapper');
        const adContainer = document.getElementById('ad-container');
        const scoreboard = document.getElementById('scoreboard');
        const triggerBtn = document.getElementById('ad-trigger-btn');
        const timerDisplay = document.getElementById('timer-display');
        
        const animationDuration = 1000; // 1 second for slide in/out
        const holdDuration = 8000; // 8 seconds to display the ad
        const totalDuration = animationDuration + holdDuration + animationDuration; // 10 seconds total

        let isAdVisible = false;
        let adTimeout;

        function updateTimer(secondsRemaining) {
            // Only show the hold time
            const holdTime = Math.max(0, secondsRemaining - 1); 
            if (holdTime > 0) {
                timerDisplay.textContent = `Ad Hold: ${holdTime.toFixed(1)}s`;
            }
        }

        function triggerAd() {
            if (isAdVisible) {
                console.log("Ad already running or transitioning.");
                return;
            }

            // 1. Disable button and start state
            isAdVisible = true;
            triggerBtn.disabled = true;
            timerDisplay.textContent = "Sliding Out...";

            // 2. Slide Out (1 second)
            // REMOVE 'ad-hidden-state' to move scoreboard margin-left to 0, revealing the ad
            bugWrapper.classList.remove('ad-hidden-state');
            
            // Adjust borders for seamless look during reveal
            adContainer.classList.remove('rounded-l-xl');
            adContainer.classList.add('rounded-l-none');
            scoreboard.classList.remove('rounded-r-xl');

            let startTime = Date.now();
            let timerInterval = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const remainingTotal = (totalDuration - elapsed) / 1000;
                
                if (elapsed <= animationDuration) {
                    // During slide out
                    timerDisplay.textContent = "Sliding Out...";
                } else if (remainingTotal > 1) {
                    // During 8-second hold
                    updateTimer(remainingTotal); 
                } else if (remainingTotal <= 1 && remainingTotal > 0) {
                    // During slide back
                    timerDisplay.textContent = "Sliding Back...";
                }
            }, 100); 

            // 3. Set Timeout for Slide Back
            adTimeout = setTimeout(() => {
                // 4. Slide Back (1 second)
                // ADD 'ad-hidden-state' back to apply negative margin and hide the ad
                bugWrapper.classList.add('ad-hidden-state');

                // 5. Cleanup after transition completes
                setTimeout(() => {
                    clearInterval(timerInterval);
                    isAdVisible = false;
                    triggerBtn.disabled = false;
                    timerDisplay.textContent = "Ready";
                    
                    // Restore original rounded corners
                    adContainer.classList.add('rounded-l-xl');
                    adContainer.classList.remove('rounded-l-none');
                    scoreboard.classList.add('rounded-r-xl');

                }, animationDuration); // Wait for the slide-back transition to finish
            }, totalDuration - animationDuration); // Start slide back after (1 + 8) seconds
        }
    </script>
</body>
</html>