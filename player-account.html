<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <link rel="icon" type="image/png" href="dartstream-logo.png">
    <title>DartStream Stats - Player Account</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .account-container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: #2d3e50;
            overflow-y: auto;
        }

        .account-header {
            background: linear-gradient(to bottom, #4a5f7a 0%, #2d3e50 100%);
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid #1a1a1a;
        }

        .account-logo {
            width: 100%;
            max-width: 200px;
            height: auto;
            margin: 0 auto 15px;
            display: block;
        }

        .account-header h1 {
            color: #ffd700;
            font-size: 32px;
            margin-bottom: 5px;
        }

        .account-header p {
            color: #fff;
            font-size: 14px;
        }

        .account-content {
            flex: 1;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .account-form {
            background: #3a3a3a;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 500px;
        }

        .form-title {
            color: #ffd700;
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            color: #fff;
            font-size: 14px;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #555;
            border-radius: 4px;
            background: #2a2a2a;
            color: #fff;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            border-color: #ffd700;
        }

        .form-input.readonly {
            background: #1a1a1a;
            cursor: not-allowed;
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s;
        }

        .submit-btn.primary {
            background: linear-gradient(to bottom, #5cb85c 0%, #449d44 100%);
            color: white;
        }

        .submit-btn.primary:hover {
            background: linear-gradient(to bottom, #449d44 0%, #398439 100%);
        }

        .submit-btn.secondary {
            background: linear-gradient(to bottom, #5bc0de 0%, #31b0d5 100%);
            color: white;
        }

        .submit-btn.secondary:hover {
            background: linear-gradient(to bottom, #31b0d5 0%, #269abc 100%);
        }

        .toggle-link {
            text-align: center;
            margin-top: 20px;
            color: #5bc0de;
            cursor: pointer;
            font-size: 14px;
        }

        .toggle-link:hover {
            text-decoration: underline;
        }

        .success-message {
            background: #5cb85c;
            color: white;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            text-align: center;
        }

        .error-message {
            background: #d9534f;
            color: white;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            text-align: center;
        }

        .player-id-display {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 4px;
            border: 2px solid #ffd700;
            text-align: center;
            margin: 20px 0;
        }

        .player-id-display .label {
            color: #ffd700;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .player-id-display .id {
            color: #fff;
            font-size: 32px;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .info-text {
            color: #aaa;
            font-size: 13px;
            margin-top: 10px;
            line-height: 1.5;
        }

        .back-link {
            margin-top: 20px;
            text-align: center;
        }

        .back-link a {
            color: #5bc0de;
            text-decoration: none;
            font-size: 14px;
        }

        .back-link a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="account-container">
            <div class="account-header">
                <img src="dartstream-logo.png" alt="DartStream Logo" class="account-logo">
                <h1>DartStream Stats</h1>
                <p>Track Your Darts Performance</p>
            </div>

            <div class="account-content">
                <!-- Registration Form -->
                <div id="register-form" class="account-form">
                    <h2 class="form-title">Create Your Account</h2>
                    
                    <div id="message-container"></div>

                    <form id="registration-form" onsubmit="return false;">
                        <div class="form-group">
                            <label class="form-label">First Name</label>
                            <input type="text" id="register-firstname" class="form-input" placeholder="Enter your first name" autocomplete="given-name">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Last Name</label>
                            <input type="text" id="register-lastname" class="form-input" placeholder="Enter your last name" autocomplete="family-name">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Email Address</label>
                            <input type="email" id="register-email" class="form-input" placeholder="Enter your email" autocomplete="email">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" id="register-password" class="form-input" placeholder="Create a password (min 6 characters)" autocomplete="new-password">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Confirm Password</label>
                            <input type="password" id="register-confirm-password" class="form-input" placeholder="Re-enter your password" autocomplete="new-password">
                        </div>

                        <button type="button" class="submit-btn primary" id="register-btn">Create Account</button>
                    </form>

                    <div class="toggle-link" id="show-login">
                        Already have an account? Login here
                    </div>

                    <div class="back-link">
                        <a href="scoring-app.html">← Back to Scoring App</a>
                    </div>
                </div>

                <!-- Login Form -->
                <div id="login-form" class="account-form" style="display: none;">
                    <h2 class="form-title">Login to Your Account</h2>
                    
                    <div id="login-message-container"></div>

                    <form id="login-account-form" onsubmit="return false;">
                        <div class="form-group">
                            <label class="form-label">Email Address</label>
                            <input type="email" id="login-email" class="form-input" placeholder="Enter your email" autocomplete="email">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" id="login-password" class="form-input" placeholder="Enter your password" autocomplete="current-password">
                        </div>

                        <button type="button" class="submit-btn primary" id="login-btn">Login</button>
                    </form>

                    <div class="toggle-link" id="show-register">
                        Don't have an account? Register here
                    </div>

                    <div class="back-link">
                        <a href="scoring-app.html">← Back to Scoring App</a>
                    </div>
                </div>

                <!-- Account Details (after successful login/registration) -->
                <div id="account-details" class="account-form" style="display: none;">
                    <h2 class="form-title">Your Account</h2>
                    
                    <div class="form-group">
                        <label class="form-label">First Name</label>
                        <input type="text" id="account-firstname" class="form-input readonly" readonly>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Last Name</label>
                        <input type="text" id="account-lastname" class="form-input readonly" readonly>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" id="account-email" class="form-input readonly" readonly>
                    </div>

                    <div class="player-id-display">
                        <div class="label">Your Player ID</div>
                        <div class="id" id="account-player-id">XXXX</div>
                    </div>

                    <p class="info-text">
                        Use this Player ID when adding yourself to the Player Library in the scoring app. 
                        Enter your email address in the library to link your account and view your personal stats.
                    </p>

                    <button class="submit-btn secondary" id="logout-btn">Logout</button>

                    <div class="back-link">
                        <a href="scoring-app.html">← Back to Scoring App</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="module" src="player-account.js"></script>
</body>
</html>
